<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>25ã¡ã‚ƒã‚“ã­ã‚‹ - ç¥ã®å…¨çŸ¥å…¨èƒ½ãƒ»æœ€çµ‚å½¢æ…‹</title>
<link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@700&display=swap" rel="stylesheet">
<style>
:root { --bg-color: #dfdfdf; }
body { margin: 0; font-family: 'M PLUS Rounded 1c', sans-serif; background: var(--bg-color); color: #000; overflow-x: hidden; }

/* è–åŸŸç›£ç¦ãƒ¢ãƒ¼ãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ« */
body.god-mode .header-logo, body.god-mode .board-grid, body.god-mode #home > button { display: none !important; }
body.god-mode #exit-btn { display: none !important; } /* ä¸€èˆ¬äººã¯æˆ»ã‚Œãªã„ */
body.god-mode.is-admin #exit-btn { display: block !important; } /* ç¥ã ã‘ã¯æˆ»ã‚Œã‚‹ */

.header-container { width: 100%; background: #fff; border-bottom: 5px solid #000; text-align: center; padding-bottom: 10px; }
.header-logo { font-size: 26px; font-weight: bold; color: #ff00ff; text-shadow: 2px 2px #000; padding: 15px 0; cursor: pointer; }
.header-img { width: 95%; max-width: 450px; display: block; margin: 0 auto; border: 2px solid #000; box-shadow: 3px 3px 0px #888; }
.menu, .panel { padding: 10px; max-width: 600px; margin: 0 auto; }
button { width: 100%; padding: 12px; margin: 5px 0; font-size: 15px; cursor: pointer; background: #eee; border: 4px outset #999; font-weight: bold; border-radius: 8px; }
.board-grid { display: flex; flex-wrap: wrap; justify-content: space-between; margin-top: 10px; }
.board-link { width: 48%; margin-bottom: 10px; padding: 15px 0; background: #fff; border: 2px solid #000; text-align: center; font-weight: bold; cursor: pointer; }
.thread { background: #fff; padding: 12px; margin: 12px 0; border: 2px solid #000; box-shadow: 4px 4px 0px #888; position: relative; }
.heart { float: right; cursor: pointer; color: #ff0000; font-size: 22px; }
.post { background: #efefef; margin: 8px 0; padding: 10px; border: 1px solid #ccc; font-size: 14px; color: #000; }
.name-niko { color: #ff00ff !important; }

#danmaku-container { position: fixed; top: 0; left: 0; width: 100%; height: 70%; pointer-events: none; z-index: 10000; }
.danmaku-text { position: absolute; white-space: pre; font-size: 22px; font-weight: bold; color: #fff; text-shadow: 2px 2px 2px #000; }
#yaju-area { position: fixed; bottom: -350px; right: 10px; width: 220px; z-index: 5000; transition: 0.6s; pointer-events: none; }
.aa-popup { position: fixed; bottom: -300px; left: 20px; background: #fff; border: 2px solid #000; padding: 10px; white-space: pre; z-index: 6000; transition: 0.5s; font-family: 'MS PGothic', sans-serif; font-size: 14px; }
#admin-bar { background: #000; color: #fff; padding: 10px; text-align: center; position: sticky; top: 0; z-index: 2000; }
.hidden { display: none !important; }
textarea, input, select { width: 100%; box-sizing: border-box; padding: 10px; margin: 5px 0; border: 2px solid #333; }
</style>
</head>
<body class="">

<div id="admin-bar" class="hidden">
  ADMIN LOGIN: <input id="admin-code" type="tel" style="width:80px;"> <button onclick="checkAdmin()" style="width:auto;">èªè¨¼</button>
</div>

<div id="danmaku-container"></div>
<div id="yaju-area"><img src="https://i.ibb.co/6R86KjLp/image.png" style="width:100%; filter: hue-rotate(180deg);"></div>
<div id="aa-box" class="aa-popup"></div>

<div class="header-container">
  <div class="header-logo" onclick="toggleAdminBar()">( ï¾Ÿâˆ€ï¾Ÿ) 25ã¡ã‚ƒã‚“ã­ã‚‹ (ï¾Ÿâˆ€ï¾Ÿ )</div>
  <img class="header-img" src="https://i.ibb.co/6R86KjLp/image.png">
</div>

<div id="home" class="menu">
  <button onclick="showRecent()">æœ€è¿‘ã®ã‚¹ãƒ¬</button>
  <button onclick="newThread()">ã‚¹ãƒ¬ç«‹ã¦</button>
  <button onclick="devMail()">ç®¡ç†äººã¸ã®æ‰‹ç´™</button>
  <div class="board-grid" id="board-area"></div>

  <div id="admin-tools" class="hidden" style="border: 5px solid #32cd32; padding: 15px; background: #e6ffe6; margin-top:20px;">
    <p style="text-align:center; font-weight:bold; color:green;">ã€çµ¶å¯¾ç¥ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«ã€‘</p>
    <button onclick="summonAll()" style="background:#000; color:#0f0;">ğŸ“¢ å…¨å“¡é›†åˆï¼ˆã“ã®ã‚¹ãƒ¬ã«ç›£ç¦ï¼‰</button>
    <button onclick="stopSummon()" style="background:#fff; color:#000;">âšª è–åŸŸã‚’è§£é™¤ï¼ˆä½æ°‘ã‚’è§£æ”¾ï¼‰</button>
    <button onclick="globalAA()" style="background:#00f; color:#fff;">ğŸ± AAãƒ†ãƒ­</button>
    <button onclick="globalYaju()" style="background:#ff8c00; color:#fff;">ğŸ‘¹ é‡ç£ãƒ†ãƒ­</button>
    <button onclick="setSecret()" style="background:#000; color:#0f0;">ğŸ” è¬ã‚³ãƒ¼ãƒ‰è¨­ç½®</button>
    <button onclick="clearCodes()" style="background:#444; color:#fff;">ğŸ”“ è¬ã‚³ãƒ¼ãƒ‰å‰Šé™¤</button>
    <button onclick="adminDelList()" style="background:#ffcccc;">ğŸ’¥ ã‚¹ãƒ¬æ¶ˆå»</button>
    <button onclick="adminMails()">æ‰‹ç´™ã‚’èª­ã‚€</button>
    <button onclick="logoutAdmin()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
  </div>
</div>

<div id="panel" class="panel hidden"></div>

<script>
let threads = JSON.parse(localStorage.getItem("threads")||"[]");
let mails = JSON.parse(localStorage.getItem("mails")||"[]");
let myLikes = JSON.parse(localStorage.getItem("myLikes")||"{}");
let secretConfigs = JSON.parse(localStorage.getItem("secretConfigs") || '{"all":null}');
let isAdmin = localStorage.getItem("isAdmin") === "true";
let likeCatcher = 0;
const myID = localStorage.getItem("myFixedID") || localStorage.setItem("myFixedID", Math.random().toString(36).substring(2, 10).toUpperCase()) || localStorage.getItem("myFixedID");
const boards = ["é›‘è«‡æ¿", "SOSæ¿", "æ–™ç†æ¿", "ã‚²ãƒ¼ãƒ æ¿", "ãƒ‹ãƒ¥ãƒ¼ã‚¹æ¿", "ãƒãƒ¼ãƒˆæ¿", "å®Ÿæ³æ¿", "AAæ¿"];
const aaList = ["ã€€ ã€€ ã€€ã€€ã€€ï¼¿ï¼¿ï¼¿_ \nã€€ ã€€ ã€€ ï¼ã€€ã€€ã€€ ã€€ ï¼¼\nã€€ã€€ã€€ï¼ã€€ _ãƒ ã€€ãƒ½ï½¤_ã€€ï¼¼\nã€€ ï¼ ã€€oï¾ŸâŒ’ã€€ã€€ã€€âŒ’ï¾Ÿoã€€ ï¼¼ \nã€€ |ã€€ã€€ã€€ã€€ ï¼ˆ__äºº__ï¼‰ã€€ã€€ã€€ã€€| \nã€€ ï¼¼ã€€ã€€ ã€€ ï½€ âŒ’Â´ ã€€ ã€€ ï¼", "ã€€ã€€ã€€ âˆ§ âˆ§\nã€€ã€€ã€€(ï¾ŸĞ”ï¾Ÿã€€)ã€€è¡Œã£ã¦ã‚ˆã—ï¼\nï¿£ï¿£ï¿£ï¿£ï¿£ï¿£ï¿£ï¿£ï¿£ï¿£ï¿£"];

window.onload = () => {
    renderBoardLinks();
    if(isAdmin) {
        document.getElementById('admin-tools').classList.remove('hidden');
        document.body.classList.add('is-admin');
    }
    checkGodStatus();
    window.addEventListener('storage', (e) => {
        if(e.key === "godTargetID" || e.key === "godModeActive") checkGodStatus();
        if(e.key === "globalAATrigger") spawnAA();
        if(e.key === "globalYajuTrigger") { yajuArea.style.bottom="0"; setTimeout(()=>yajuArea.style.bottom="-350px",3000); }
    });
};

function checkGodStatus() {
    const isActive = localStorage.getItem("godModeActive") === "true";
    const targetID = localStorage.getItem("godTargetID");
    if(isActive && targetID) {
        document.body.classList.add('god-mode');
        openThread(Number(targetID), true);
    } else {
        document.body.classList.remove('god-mode');
    }
}

function summonAll() {
    // ç¾åœ¨é–‹ã„ã¦ã„ã‚‹ã‚¹ãƒ¬ã€ã¾ãŸã¯æœ€æ–°ã®ã‚¹ãƒ¬ã‚’ç›£ç¦å¯¾è±¡ã«ã™ã‚‹
    let threadID = prompt("ç›£ç¦ã™ã‚‹ã‚¹ãƒ¬IDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆç©ºãªã‚‰ä»Šé–‹ã„ã¦ã„ã‚‹ã‚¹ãƒ¬ï¼‰");
    if(!threadID && threads.length > 0) threadID = threads[threads.length-1].id;
    if(!threadID) return alert("ã‚¹ãƒ¬ãŒã‚ã‚Šã¾ã›ã‚“");
    
    localStorage.setItem("godTargetID", threadID);
    localStorage.setItem("godModeActive", "true");
    checkGodStatus();
}

function stopSummon() {
    localStorage.setItem("godModeActive", "false");
    localStorage.removeItem("godTargetID");
    location.reload();
}

function renderBoardLinks(){ document.getElementById('board-area').innerHTML = boards.map(b => `<div class="board-link" onclick="showRecent('${b}')">${b}</div>`).join(""); }

function createDanmaku(text) {
    const span = document.createElement('span');
    span.className = 'danmaku-text';
    span.innerText = text;
    span.style.top = Math.random() * 80 + '%';
    span.style.right = '-100%';
    document.getElementById('danmaku-container').appendChild(span);
    let pos = -100;
    function move() { pos += 5; span.style.right = pos + 'px'; if(pos < window.innerWidth + 1000) requestAnimationFrame(move); else span.remove(); }
    move();
}

function spawnAA(){ 
    const box = document.getElementById('aa-box');
    box.innerText = aaList[Math.floor(Math.random()*aaList.length)];
    box.style.bottom = "20px";
    setTimeout(()=>box.style.bottom="-300px",4000);
}

function globalAA(){ localStorage.setItem("globalAATrigger", Date.now()); spawnAA(); }
function globalYaju(){ localStorage.setItem("globalYajuTrigger", Date.now()); }

function like(id, e){
    e.stopPropagation();
    if(++likeCatcher >= 10 && !isAdmin) document.getElementById('admin-bar').classList.remove('hidden');
    const t = threads.find(x => x.id === id); if(!t || myLikes[id]) return;
    t.likes = (t.likes || 0) + 1; myLikes[id] = true;
    localStorage.setItem("threads", JSON.stringify(threads));
    e.target.innerText = "â™¥" + t.likes;
}

function openThread(id, stay = false){
    const t = threads.find(x => x.id === id); if(!t) return;
    let h = `<h3 style="${localStorage.getItem("godModeActive")==='true'?'color:red':''}">ã€${t.board}ã€‘${t.title}</h3>`;
    if(localStorage.getItem("godModeActive")==='true') h += `<p style="color:red; font-weight:bold;">âš ï¸ è–åŸŸç›£ç¦ä¸­ï¼šç¥ãŒè¨±ã™ã¾ã§é›¢ã‚Œã‚‰ã‚Œã¾ã›ã‚“ âš ï¸</p>`;
    
    t.posts.forEach(p => h += `<div class="post"><small>${p.date} ID:${p.uid}</small><br><b class="${p.isAdmin?'name-niko':''}">${p.name}</b>: ${p.text}</div>`);
    h += `<hr>åå‰ï¼š<input id="un" value="${isAdmin?'ã«ã“ã¡ã‚ƒã‚“':'åç„¡ã—'}" style="width:100px;"><textarea id="pc"></textarea><button onclick="sendPost(${id})">æ›¸ãè¾¼ã‚€</button>`;
    h += `<button onclick="closePanel()" id="exit-btn">æˆ»ã‚‹</button>`;
    openPanel(h, stay);
}

function sendPost(id){
    const t = threads.find(x => x.id === id);
    const text = document.getElementById('pc').value; if(!text) return;
    t.posts.push({ name: document.getElementById('un').value, text, date: new Date().toLocaleTimeString(), uid: myID, isAdmin });
    localStorage.setItem("threads", JSON.stringify(threads));
    openThread(id, true);
}

function showRecent(b){
    let list = b ? threads.filter(t => t.board === b) : threads;
    let h = `<h3>${b||'æœ€è¿‘'}ã®ã‚¹ãƒ¬</h3>`;
    list.reverse().forEach(t => h += `<div class="thread" onclick="openThread(${t.id})"><span class="heart" onclick="like(${t.id}, event)">â™¥${t.likes||0}</span>${t.title}</div>`);
    openPanel(h + `<button onclick="closePanel()">æˆ»ã‚‹</button>`);
}

function checkAdmin(){ if(document.getElementById('admin-code').value==="252525"){ localStorage.setItem("isAdmin","true"); location.reload(); }}
function logoutAdmin(){ localStorage.setItem("isAdmin","false"); location.reload(); }
function toggleAdminBar(){ document.getElementById('admin-bar').classList.toggle('hidden'); }
function openPanel(h, s){ home.classList.add("hidden"); panel.innerHTML=h; panel.classList.remove("hidden"); if(!s) window.scrollTo(0,0); }
function closePanel(){ panel.classList.add("hidden"); home.classList.remove("hidden"); }
function newThread(){ openPanel(`<h3>ã‚¹ãƒ¬ç«‹ã¦</h3>æ¿ï¼š<select id="bs">${boards.map(b=>`<option>${b}</option>`).join("")}</select><br><input id="tit" placeholder="ã‚¿ã‚¤ãƒˆãƒ«"><button onclick="createT()">ä½œæˆ</button><button onclick="closePanel()">æˆ»ã‚‹</button>`); }
function createT(){ let t=document.getElementById('tit').value; if(t){threads.push({id:Date.now(),title:t,board:document.getElementById('bs').value,posts:[],likes:0});localStorage.setItem("threads",JSON.stringify(threads));showRecent();}}
function setSecret(){ let key=prompt("ã‚³ãƒ¼ãƒ‰"); secretConfigs.all={key}; localStorage.setItem("secretConfigs",JSON.stringify(secretConfigs)); }
function clearCodes(){ secretConfigs={all:null}; localStorage.setItem("secretConfigs",JSON.stringify(secretConfigs)); alert("å‰Šé™¤"); }
function adminDelList(){ let h="<h3>ã‚¹ãƒ¬æ¶ˆå»</h3>"; threads.forEach(t=>h+=`<div>${t.title} <button onclick="dt(${t.id})">æ¶ˆã™</button></div>`); openPanel(h+`<button onclick="closePanel()">æˆ»ã‚‹</button>`); }
function dt(id){ threads=threads.filter(x=>x.id!==id); localStorage.setItem("threads",JSON.stringify(threads)); adminDelList(); }
function devMail(){ openPanel(`<h3>æ‰‹ç´™</h3><textarea id="mt"></textarea><button onclick="sm()">é€ã‚‹</button><button onclick="closePanel()">æˆ»ã‚‹</button>`); }
function sm(){ mails.push(document.getElementById('mt').value); localStorage.setItem("mails",JSON.stringify(mails)); alert("å±Šã„ãŸ"); closePanel(); }
function adminMails(){ let h="<h3>æ‰‹ç´™</h3>"; mails.forEach(m=>h+=`<div class="post">${m}</div>`); openPanel(h+`<button onclick="closePanel()">æˆ»ã‚‹</button>`); }
const yajuArea = document.getElementById('yaju-area');
</script>
</body>
</html>
